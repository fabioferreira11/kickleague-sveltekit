import { c as create_ssr_component, o as onDestroy, v as validate_component } from "../../../chunks/ssr.js";
/* empty css                     */
import { H as Header, M as MenuBurger } from "../../../chunks/MenuBurger.js";
import "country-list";
/* empty css                                                         */
const css$1 = {
  code: ".pack-image.svelte-67rwzq.svelte-67rwzq,.centered-pack.svelte-67rwzq.svelte-67rwzq{cursor:pointer;transition:transform 0.5s ease;z-index:10}.pack-image.svelte-67rwzq h3.svelte-67rwzq{margin:10px auto;font-weight:400}.pack-image.svelte-67rwzq img.svelte-67rwzq,.centered-pack.svelte-67rwzq.svelte-67rwzq{width:50vw}.centered-pack.svelte-67rwzq.svelte-67rwzq{position:fixed;left:50%;top:50%;transform:translate(-50%, -50%) scale(1.5)}.dark-background.svelte-67rwzq.svelte-67rwzq{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.95);display:flex;justify-content:center;align-items:center}.player-cards.svelte-67rwzq.svelte-67rwzq{display:flex;justify-content:center;width:100%}@media(min-width: 768px){.pack-image.svelte-67rwzq img.svelte-67rwzq,.centered-pack.svelte-67rwzq.svelte-67rwzq{width:15vw}}",
  map: `{"version":3,"file":"pack.svelte","sources":["pack.svelte"],"sourcesContent":["<script>\\r\\n    import { onMount } from 'svelte';\\r\\n    import CarteJoueur from '$lib/carte-joueur.svelte';\\r\\n    import { fly, fade } from 'svelte/transition';\\r\\n\\r\\n    // Variables d'état pour gérer l'affichage du pack, le statut d'ouverture, et les joueurs récupérés\\r\\n    let players = [];\\r\\n    let isOpened = false;\\r\\n    let currentIndex = 0;\\r\\n    let showingPackImage = true;\\r\\n    let packOpened = false;\\r\\n    let userId;\\r\\n    let showPackOnDarkBackground = false;\\r\\n\\r\\n    // Fonction pour récupérer le pack de joueurs pour l'utilisateur\\r\\n    async function fetchPlayerPack() {\\r\\n        const checkResponse = await fetch('/api/checkPackStatus', {\\r\\n            method: 'POST',\\r\\n            headers: { 'Content-Type': 'application/json' },\\r\\n            body: JSON.stringify({ userId })\\r\\n        });\\r\\n\\r\\n        const checkData = await checkResponse.json();\\r\\n        packOpened = checkData.packOpened; // Mise à jour de l'état packOpened selon la réponse du serveur\\r\\n\\r\\n        if (!packOpened) { // Si le pack n'est pas déjà ouvert\\r\\n            const response = await fetch('/api/getPlayerPack', {\\r\\n                method: 'POST',\\r\\n                headers: { 'Content-Type': 'application/json' },\\r\\n                body: JSON.stringify({ userId })\\r\\n            });\\r\\n\\r\\n            if (response.ok) {\\r\\n                const data = await response.json();\\r\\n                players = data.selectedPlayers; // Stocker les joueurs obtenus du serveur\\r\\n            } else {\\r\\n                console.error(\\"Failed to load player pack:\\", await response.text());\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Marque le pack comme ouvert et déclenche l'affichage des cartes\\r\\n    async function markPackAsOpened() {\\r\\n        const response = await fetch('/api/openPack', {\\r\\n            method: 'POST',\\r\\n            headers: { 'Content-Type': 'application/json' },\\r\\n            body: JSON.stringify({ userId, packId: 1 })\\r\\n        });\\r\\n\\r\\n        if (response.ok) {\\r\\n            const data = await response.json();\\r\\n            if (data.success) {\\r\\n                packOpened = true;\\r\\n                showPackOnDarkBackground = false;\\r\\n                isOpened = true;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Récupère les informations de session et charge le pack de l'utilisateur au montage du composant\\r\\n    onMount(async () => {\\r\\n        const response = await fetch('/api/session', {\\r\\n            method: 'GET',\\r\\n            credentials: 'include'\\r\\n        });\\r\\n        const data = await response.json();\\r\\n        if (response.ok && data.userid) {\\r\\n            userId = data.userid;\\r\\n            fetchPlayerPack();\\r\\n        } else {\\r\\n            console.error(\\"Failed to retrieve user ID:\\", response.statusText);\\r\\n        }\\r\\n    });\\r\\n\\r\\n    // Prépare l'ouverture du pack avec un fond noir si non ouvert\\r\\n    function openPack() {\\r\\n        if (!packOpened && showingPackImage) {\\r\\n            showPackOnDarkBackground = true;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Active les cartes des joueurs une fois le pack ouvert\\r\\n    function activateCards() {\\r\\n        if (showPackOnDarkBackground) {\\r\\n            markPackAsOpened();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Gère le clic sur une carte de joueur, passe à la suivante ou termine l'affichage\\r\\n    function handleCardClick() {\\r\\n        if (currentIndex < players.length - 1) {\\r\\n            currentIndex++;\\r\\n        } else {\\r\\n            isOpened = false;\\r\\n        }\\r\\n    }\\r\\n<\/script>\\r\\n\\r\\n{#if !packOpened}\\r\\n    {#if showPackOnDarkBackground}\\r\\n        <!-- Affichage de l'image du pack sur fond noir -->\\r\\n        <div class=\\"dark-background\\" on:click={activateCards} transition:fade>\\r\\n            <img src=\\"/img/pack.png\\" class=\\"centered-pack\\" alt=\\"Pack de bienvenue\\">\\r\\n        </div>\\r\\n    {:else}\\r\\n        <!-- Affichage de l'image du pack normale -->\\r\\n        <div on:click={openPack} class=\\"pack-image\\">\\r\\n            <img src=\\"/img/pack.png\\" alt=\\"Pack de bienvenue\\">\\r\\n            <h3>Pack de bienvenue</h3>\\r\\n        </div>\\r\\n    {/if}\\r\\n{:else if isOpened}\\r\\n    <!-- Affichage des cartes des joueurs après ouverture du pack -->\\r\\n    <div class=\\"dark-background\\">\\r\\n        <div class=\\"player-cards\\">\\r\\n            {#each players as player, index (player.id)}\\r\\n                {#if index === currentIndex}\\r\\n                    <div on:click={handleCardClick} in:fade={{ delay: 500, duration: 500 }} out:fly={{ x: -200, duration: 1000 }}>\\r\\n                        <CarteJoueur {player} fullWidth={true}/> <!-- Affichage de la carte du joueur avec animation -->\\r\\n                    </div>\\r\\n                {/if}\\r\\n            {/each}\\r\\n        </div>\\r\\n    </div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\r\\n    .pack-image, .centered-pack {\\r\\n        cursor: pointer;\\r\\n        transition: transform 0.5s ease;\\r\\n        z-index: 10;\\r\\n    }\\r\\n    .pack-image h3 {\\r\\n        margin: 10px auto;\\r\\n        font-weight: 400;\\r\\n    }\\r\\n    .pack-image img, .centered-pack {\\r\\n        width: 50vw;\\r\\n    }\\r\\n    .centered-pack {\\r\\n        position: fixed;\\r\\n        left: 50%;\\r\\n        top: 50%;\\r\\n        transform: translate(-50%, -50%) scale(1.5);\\r\\n    }\\r\\n    .dark-background {\\r\\n        position: fixed;\\r\\n        top: 0;\\r\\n        left: 0;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        background-color: rgba(0, 0, 0, 0.95);\\r\\n        display: flex;\\r\\n        justify-content: center;\\r\\n        align-items: center;\\r\\n    }\\r\\n    .player-cards {\\r\\n        display: flex;\\r\\n        justify-content: center;\\r\\n        width: 100%;\\r\\n    }\\r\\n    @media (min-width: 768px) {\\r\\n    .pack-image img, .centered-pack {\\r\\n        width: 15vw;\\r\\n    }\\r\\n    }\\r\\n</style>"],"names":[],"mappings":"AAgII,uCAAW,CAAE,0CAAe,CACxB,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,SAAS,CAAC,IAAI,CAAC,IAAI,CAC/B,OAAO,CAAE,EACb,CACA,yBAAW,CAAC,gBAAG,CACX,MAAM,CAAE,IAAI,CAAC,IAAI,CACjB,WAAW,CAAE,GACjB,CACA,yBAAW,CAAC,iBAAG,CAAE,0CAAe,CAC5B,KAAK,CAAE,IACX,CACA,0CAAe,CACX,QAAQ,CAAE,KAAK,CACf,IAAI,CAAE,GAAG,CACT,GAAG,CAAE,GAAG,CACR,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,CAC9C,CACA,4CAAiB,CACb,QAAQ,CAAE,KAAK,CACf,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACrC,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MACjB,CACA,yCAAc,CACV,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,KAAK,CAAE,IACX,CACA,MAAO,YAAY,KAAK,CAAE,CAC1B,yBAAW,CAAC,iBAAG,CAAE,0CAAe,CAC5B,KAAK,CAAE,IACX,CACA"}`
};
const Pack = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css$1);
  return `${`${` <div class="pack-image svelte-67rwzq" data-svelte-h="svelte-oyka1l"><img src="/img/pack.png" alt="Pack de bienvenue" class="svelte-67rwzq"> <h3 class="svelte-67rwzq">Pack de bienvenue</h3></div>`}`}`;
});
const css = {
  code: "main.svelte-16mn73v.svelte-16mn73v{padding-top:0}.pack-text.svelte-16mn73v.svelte-16mn73v{width:100%;padding:0 5vw}.pack-text.svelte-16mn73v h2.svelte-16mn73v,.pack-text.svelte-16mn73v p.svelte-16mn73v{text-align:center;margin:2vh auto}.pack.svelte-16mn73v.svelte-16mn73v{display:flex;flex-direction:column;align-items:center}@media(min-width: 768px){main.svelte-16mn73v.svelte-16mn73v{padding-top:2vh}.pack-text.svelte-16mn73v.svelte-16mn73v{width:40%;padding:0 3vw}.pack-text.svelte-16mn73v h2.svelte-16mn73v,.pack-text.svelte-16mn73v p.svelte-16mn73v{text-align:left}.pack-text.svelte-16mn73v h2.svelte-16mn73v{margin:5vh 0 2vh 0 }.pack.svelte-16mn73v.svelte-16mn73v{margin:20px auto 0 3%;align-items:flex-start}}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script>\\r\\n    import '../../styles/global.css';\\r\\n    import { onMount, onDestroy } from 'svelte';\\r\\n    import Header from '$lib/header.svelte';\\r\\n    import MenuBurger from '$lib/MenuBurger.svelte';\\r\\n    import Pack from '$lib/pack.svelte';\\r\\n    \\r\\n    let isMobile = false; // Gère l'état mobile ou non de la page\\r\\n\\r\\n    // Vérifie la taille de l'écran et met à jour l'état isMobile en conséquence\\r\\n    function checkScreenSize() {\\r\\n        if (typeof window !== 'undefined') {\\r\\n            isMobile = window.innerWidth <= 768;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Initialise les gestionnaires d'événements au montage du composant\\r\\n    onMount(() => {\\r\\n        if (typeof window !== 'undefined') {\\r\\n            checkScreenSize();\\r\\n            window.addEventListener('resize', checkScreenSize);\\r\\n        }\\r\\n    });\\r\\n\\r\\n    // Nettoie les gestionnaires d'événements au démontage du composant\\r\\n    onDestroy(() => {\\r\\n        if (typeof window !== 'undefined') {\\r\\n            window.removeEventListener('resize', checkScreenSize);\\r\\n        }\\r\\n    });\\r\\n<\/script>\\r\\n  \\r\\n<main class=\\"bg-pack\\">\\r\\n    {#if isMobile}\\r\\n    <MenuBurger/>\\r\\n    {:else}\\r\\n    <Header />\\r\\n    {/if}\\r\\n    <section class=\\"pack-text\\">\\r\\n        <h2>Pack</h2>\\r\\n        <p>Bienvenue sur la page Pack, où vos récompenses vous attendent ! Après chaque match week, venez ici pour déballer les packs gagnés et découvrir vos nouveaux joueurs. Préparez-vous à enrichir votre club et à renforcer votre équipe pour les prochains tournois.</p>\\r\\n    </section>\\r\\n    <section class=\\"section-pack\\">\\r\\n        <div class=\\"pack\\">\\r\\n            <Pack />\\r\\n        </div>\\r\\n    </section>\\r\\n</main>\\r\\n    \\r\\n<style>\\r\\n    main{\\r\\n        padding-top: 0;\\r\\n    }\\r\\n\\r\\n    .pack-text{\\r\\n        width: 100%;\\r\\n        padding: 0 5vw;\\r\\n    }\\r\\n\\r\\n    .pack-text h2,.pack-text p {\\r\\n        text-align: center;\\r\\n        margin:2vh auto;\\r\\n    } \\r\\n\\r\\n    .pack{\\r\\n        display: flex;\\r\\n        flex-direction: column;\\r\\n        align-items: center;\\r\\n    }\\r\\n\\r\\n    @media (min-width: 768px) {\\r\\n    main{\\r\\n        padding-top: 2vh;\\r\\n    }\\r\\n\\r\\n    .pack-text{\\r\\n        width: 40%;\\r\\n        padding: 0 3vw;\\r\\n    }\\r\\n\\r\\n    .pack-text h2,.pack-text p {\\r\\n        text-align: left;\\r\\n    }\\r\\n\\r\\n    .pack-text h2{\\r\\n            margin: 5vh 0 2vh 0 ;\\r\\n        }\\r\\n\\r\\n    .pack{\\r\\n        margin: 20px auto 0 3%;\\r\\n        align-items: flex-start;\\r\\n    }\\r\\n\\r\\n    }\\r\\n</style>"],"names":[],"mappings":"AAkDI,kCAAI,CACA,WAAW,CAAE,CACjB,CAEA,wCAAU,CACN,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,CAAC,CAAC,GACf,CAEA,yBAAU,CAAC,iBAAE,CAAC,yBAAU,CAAC,gBAAE,CACvB,UAAU,CAAE,MAAM,CAClB,OAAO,GAAG,CAAC,IACf,CAEA,mCAAK,CACD,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,MACjB,CAEA,MAAO,YAAY,KAAK,CAAE,CAC1B,kCAAI,CACA,WAAW,CAAE,GACjB,CAEA,wCAAU,CACN,KAAK,CAAE,GAAG,CACV,OAAO,CAAE,CAAC,CAAC,GACf,CAEA,yBAAU,CAAC,iBAAE,CAAC,yBAAU,CAAC,gBAAE,CACvB,UAAU,CAAE,IAChB,CAEA,yBAAU,CAAC,iBAAE,CACL,MAAM,CAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CACvB,CAEJ,mCAAK,CACD,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CACtB,WAAW,CAAE,UACjB,CAEA"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let isMobile = false;
  function checkScreenSize() {
    if (typeof window !== "undefined") {
      isMobile = window.innerWidth <= 768;
    }
  }
  onDestroy(() => {
    if (typeof window !== "undefined") {
      window.removeEventListener("resize", checkScreenSize);
    }
  });
  $$result.css.add(css);
  return `<main class="bg-pack svelte-16mn73v">${isMobile ? `${validate_component(MenuBurger, "MenuBurger").$$render($$result, {}, {}, {})}` : `${validate_component(Header, "Header").$$render($$result, {}, {}, {})}`} <section class="pack-text svelte-16mn73v" data-svelte-h="svelte-e5bn08"><h2 class="svelte-16mn73v">Pack</h2> <p class="svelte-16mn73v">Bienvenue sur la page Pack, où vos récompenses vous attendent ! Après chaque match week, venez ici pour déballer les packs gagnés et découvrir vos nouveaux joueurs. Préparez-vous à enrichir votre club et à renforcer votre équipe pour les prochains tournois.</p></section> <section class="section-pack"><div class="pack svelte-16mn73v">${validate_component(Pack, "Pack").$$render($$result, {}, {}, {})}</div></section> </main>`;
});
export {
  Page as default
};
